{% extends "base.html" %}
{% block meta_title %}Home{% endblock %}
{% load mezzanine_tags static blog_tags accounts_tags dashboard_tags i18n %}

{% comment %}

These data should be given fast without ajax.
The dashboard template assumes context dictionary has the following keys
timestamp
title
first author
resource id
content type
privacy;;

timestamp should go with a template tags to convert to a human readble day.
{% endcomment %}

{% block main %}
    <div class="container  collapse dashboard-section-container" id="getStarted">
        {% trans "Getting Started" as whole_title %}
        {% include "includes/apps_block_title.html" %}
        <div id="row-1" class="row">
            <div class="col-xs-12 col-sm-4  get-started-cell">
                <a href="https://help.hydroshare.org/introduction-to-hydroshare/getting-started/"
                   class="get-started-link">Learn to use HydroShare</a>
            </div>
            <div class="col-xs-12 col-sm-4  get-started-cell">
                <a href="/user/" class="get-started-link">Complete profile</a>
            </div>
            <div class="col-xs-12 col-sm-4  get-started-cell">
                <a href="/search/" class="get-started-link">Browse data</a>
            </div>
        </div>

        <div id="row-2" class="row">
            <div class="col-xs-12 col-sm-4 get-started-cell">
                <a href="https://help.hydroshare.org/introduction-to-hydroshare/" class="get-started-link">Introduction to HydroShare</a>
            </div>
            <div class="col-xs-12 col-sm-4 get-started-cell">
                <a href="https://help.hydroshare.org/introduction-to-hydroshare/getting-started/example-resources/"
                   class="get-started-link">Example resources
                </a>
            </div>
            <div class="col-xs-12 col-sm-4 get-started-cell">
                <a href="https://help.hydroshare.org/about-hydroshare/releases/"
                   class="get-started-link">Recent upgrades</a>
            </div>
        </div>

    </div>


    <div>
        <div class="container dashboard-section-container">
            <div class="row dashboard-section-container-title-row">
                <span>
                 <h3 class="home-page-block-title">Recently Visited </h3>
                    <span style="float: right">
                    <a href="#" id="change_me" class="get-started-toggle" data-toggle="collapse"
                       data-target="#getStarted">Show get started</a>
                    </span>
                </span>
            </div>
            <table class="table-hover table-striped resource-custom-table" id="recently-visited-resources"
                   style="width: 100%;">
                <thead>
                <tr>
                    <th style="padding-left: 10px;">Accessed</th>
                    <th style="padding-left: 10px;">Title</th>
                    <th style="padding-left: 10px;">First Author</th>
                    <th style="padding-left: 10px;">Resource Type</th>
                    <th style="padding-left: 10px;">Visibility</th>
                </tr>
                </thead>
                {# ====================================== #}
                {# == Here comes the data from backend == #}
                {# ====================================== #}
                <tbody>
                {% for r in recent %}
                    <tr class="data-row">
                        <td>{{ r.last_accessed | just_in_time }}</td>
                        <td>
                            {% autoescape off %}
                                {% resource_link_builder r.title r.short_id %}
                            {% endautoescape %}
                        </td>
                        <td>{{ r.first_creator }}</td>
                        <td>
                            {% autoescape off %}
                                {% resource_verbose_name_builder r.resource_type %}
                            {% endautoescape %}
                        </td>
                        <td>{% build_privacy_status r.published r.public r.discoverable %}</td>
                    </tr>
                {% endfor %}

                </tbody>

            </table>
        </div>

        <div class="container dashboard-section-container">
            {% trans "Featured Apps" as whole_title %}
            {% include "includes/apps_block_title.html" %}
            <div class="row big-app-row">
                {% trans "CUAHSI JupyterHub" as title_name %}
                {% trans "https://jupyter.cuahsi.org" as title_url %}
                {% trans "jupiterhub.png" as app_image %}
                {% trans "Jupyter Hub App" as app_image_alt %}
                {% trans "Use this app to launch HydroShare data in an online Python environment that uses JupyterHub software stack." as app_content %}
                {% include "includes/big_image_button_app.html" %}

                {% trans "National Water Model Forecast Viewer" as title_name %}
                {% trans "https://hs-apps.hydroshare.org/apps/nwm-forecasts/" as title_url %}
                {% trans "nwm_forecasts.png" as app_image %}
                {% trans "National Water Model Forecast Viewer App" as app_image_alt %}
                {% trans "Retrieve and preview National Water Model data." as app_content %}
                {% include "includes/big_image_button_app.html" %}
            </div>

        </div>

        {# CUAHSI developed apps #}
        <div class="container dashboard-section-container">
            {% trans "Additional CUAHSI Water Data Services" as whole_title %}
            {% include "includes/apps_block_title.html" %}
            <div class="row big-app-row">
                {% trans "HydroClient" as title_name %}
                {% trans "https://data.cuahsi.org" as title_url %}
                {% trans "hydro_client.png" as app_image %}
                {% trans "CUAHSI hyrdoclient web app" as app_image_alt %}
                {% trans "Explore and retrieve time series data from federal agencies, academic scientists, & volunteer monitoring organizations." as app_content %}
                {% include "includes/big_image_button_app.html" %}

                {% trans "Time Series Data Uploader" as title_name %}
                {% trans "http://hydroserver.cuahsi.org" as title_url %}
                {% trans "hydro_server.png" as app_image %}
                {% trans "CUAHSI data uploader for Time Series Data" as app_image_alt %}
                {% trans "Share your time series data. Request a database and upload your formatted data to make it available in HydroClient." as app_content %}
                {% include "includes/big_image_button_app.html" %}
            </div>
        </div>


    </div>
{% endblock %}

{% block extra_head %}
    <script type="application/ld+json">
{
    "@context": {
        "@vocab": "http://schema.org/",
        "gdx": "http://geodex.org/voc/",
        "datacite": "http://purl.org/spar/datacite/",
        "geolink": "http://schema.geolink.org/1.0/base/main#",
        "schema": "http://schema.org/"
    },
    "@type": ["Service", "Organization", "DataCatalog"],
    "@id": "https://www.hydroshare.org",
    "additionalType": "https://geodex.org/voc/ResearchRepositoryService",
    "legalName": "CUAHSI HydroShare",
    "name": "CUAHSI HydroShare",
    "url": "https://www.hydroshare.org",
    "description": "CUAHSI HydroShare is an online collaboration environment for sharing data, models, and code.",
    "category": [
        "Hydrology",
        "Hydrologic Modeling",
        "GIS"
    ],
    "provider": {
        "@id": "https://www.hydroshare.org"
    },
    "parentOrganization": {
        "@type": "Organization",
        "@id": "http://www.cuahsi.org",
        "legalName": "Consortium of Universities for the Advancement of Hydrologic Science, Inc",
        "name": "CUAHSI",
        "url": "http://www.cuahsi.org",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "150 CambridgePark Drive, Suite 203",
            "addressLocality": "Cambridge",
            "addressRegion": "MA",
            "postalCode": "02140",
            "addressCountry": "USA"
        }
    },
    "funder": {
        "@type": "Organization",
        "@id": "https://dx.doi.org/10.13039/100000141",
        "legalName": "Division of Earth Sciences",
        "alternateName": "OCE",
        "url": "https://www.nsf.gov/div/index.jsp?div=EAR",
        "identifier": {
            "@type": "PropertyValue",
            "propertyID": "http://purl.org/spar/datacite/doi",
            "value": "10.13039/100000160",
            "url": "http://doi.org/10.13039/100000160"
        },
        "parentOrganization": {
            "@type": "Organization",
            "@id": "http://dx.doi.org/10.13039/100000085",
            "legalName": "Directorate for Geosciences",
            "alternateName": "NSF-GEO",
            "url": "http://www.nsf.gov",
            "identifier": {
                "@type": "PropertyValue",
                "propertyID": "http://purl.org/spar/datacite/doi",
                "value": "10.13039/100000085",
                "url": "https://doi.org/10.13039/100000085"
            },
            "parentOrganization": {
                "@type": "Organization",
                "@id": "http://dx.doi.org/10.13039/100000001",
                "legalName": "National Science Foundation",
                "alternateName": "NSF",
                "url": "http://www.nsf.gov",
                "identifier": {
                    "@type": "PropertyValue",
                    "propertyID": "http://purl.org/spar/datacite/doi",
                    "value": "10.13039/100000001",
                    "url": "https://doi.org/10.13039/100000001"
                }
            }
        }
    },
    "publishingPrinciples": [
        {
            "@type": "DigitalDocument",
            "additionalType": "https://geodex.org/voc/Protocol-TermsOfUse",
            "name": "Terms of Use",
            "url": "https://help.hydroshare.org/about-hydroshare/policies/terms-of-use/",
            "fileFormat": "text/html"
        },
        {
            "@type": "DigitalDocument",
            "additionalType": "https://geodex.org/voc/Protocol-ResourceSubmissionPolicy",
            "name": "HydroShare Publication Agreement",
            "url": "https://help.hydroshare.org/about-hydroshare/policies/hydroshare-publication-agreement/",
            "fileFormat": "text/html"
        }
    ],
    "availableChannel": [
        {
            "@type": "ServiceChannel",
            "serviceUrl": "http://www.hydroshare.org/search",
            "providesService": {
                "@type": "Service",
                "additionalType": "https://geodex.org/voc/SearchService",
                "name": "HydroShare Discovery",
                "description": "Search hydrologic resources shared with the community.",
                "potentialAction": {
                    "@type": "SearchAction",
                    "target": "https://www.hydroshare.org/search/?q={query_string}",
                    "query-input": {
                        "@type": "PropertyValueSpecification",
                        "valueRequired": true,
                        "valueName": "query_string"
                    }
                }
            }
        },
        {
            "@type": "ServiceChannel",
            "serviceUrl": "https://www.hydroshare.org/sitemap.xml",
            "providesService": {
            "@type": "Service",
                "additionalType": "https://geodex.org/voc/SyndicationService",
                "name": "Sitemap XML",
                "description": "A Sitemap XML providing access to all of the resources for harvesting",
                "potentialAction": {
                    "@type": "ConsumeAction",
                    "target": {
                        "@type": "EntryPoint",
                        "additionalType": "https://geodex.org/voc/SitemapXML",
                        "urlTemplate": "https://www.hydroshare.org/sitemap.xml?page={page}"
                    },
                    "object": {
                        "@type": "DigitalDocument",
                        "url": "https://www.hydroshare.org/sitemap.xml",
                        "fileFormat": "application/xml"
                    }
                }
            }
        },
        {
            "@type": "ServiceChannel",
            "serviceUrl": "https://hydroshare.org/hsapi/resource",
            "providesService": {
            "@type": "Service",
                "name": "HydroShare Resources REST API",
                "description": "Programmatically search and filter HydroShare datasets via a JSON REST API",
                "potentialAction": {
                    "@type": "SearchAction",
                    "target": {
                        "@type": "EntryPoint",
                        "contentType": ["application/json"],
                        "urlTemplate": "https://hydroshare.org/hsapi/resource",
                        "description": "Programmatically search and filter HydroShare datasets via a JSON REST API",
                        "httpMethod": ["GET", "POST"]
                    }
                }
            }
        }
    ]
}
</script>
{% endblock %}



{% block extra_css %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/dashboard.css">
{% endblock %}

{% block extra_js %}
    {{ block.super }}
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/dashboard.js"></script>
{% endblock %}
