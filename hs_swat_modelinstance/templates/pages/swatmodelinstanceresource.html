{# __author__ = 'Mohamed Morsy' #}
{# This template is used as the landing page for TimeSeriesResource #}

{% extends "pages/genericresource.html" %}
{#{% load geoanalytics_tags pages_tags mezzanine_tags crispy_forms_tags %}#}
{#{% load geoanalytics_tags pages_tags mezzanine_tags comment_tags keyword_tags hydroshare_tags crispy_forms_tags inplace_edit %}#}

{% block extended_metadata %}
    {% if extended_metadata_exists %}
        <div class="row">
            <div class="col-md-12">
                <div>
                    {% if model_output %}
                        <h4><strong>Model Output:</strong></h4>
                        <hr style="margin-top: 0px;margin-bottom: 2px">
                        <div class="row">
                            <div class="col-sm-4"><strong>Includes output files?</strong></div>
                            {% if model_output.includes_output %}
                                <div class="col-sm-8">Yes</div>
                            {% else %}
                                <div class="col-sm-8">No</div>
                            {% endif %}

                        </div>
                    <hr style="border:0">
                    {%  endif %}
                </div>
                <div>
                    {% if executed_by.model_program_fk %}
                        <h4><strong>Executed By:</strong></h4>
                        <hr style="margin-top: 0px;margin-bottom: 2px">
                        <div class="row">

                            <div class="col-sm-4"><strong>Name</strong></div>
                            <div class="col-sm-8">{{ executed_by.model_program_fk.title }}</div>

                            <div class="col-sm-4"><strong>Version</strong></div>
                            <div class="col-sm-8">
                                {% if executed_by.model_program_fk.metadata.program.software_version.strip %}
                                    {{ executed_by.model_program_fk.metadata.program.software_version }}
                                {% else %}
                                    Not Provided
                                {% endif %}

                            </div>

                            <div class="col-sm-4"><strong>Resource URL</strong></div>

                            <div class="col-sm-8">
                                {% if request.is_secure %}
                                    <a id="permalink"
                                       href="https://{{ request.get_host }}/resource/{{ executed_by.model_program_fk.short_id }}/"
                                       target="_blank">https://{{ request.get_host }}/resource/{{ executed_by.model_program_fk.short_id }}</a>
                                {% else %}
                                    <a id="permalink"
                                       href="http://{{ request.get_host }}/resource/{{ executed_by.model_program_fk.short_id }}/"
                                       target="_blank">http://{{ request.get_host }}/resource/{{ executed_by.model_program_fk.short_id }}</a>
                                {% endif %}
                            </div>
                        </div>

                        <hr>

                    {% else %}
                        <h4><strong>Executed By:</strong></h4>
                        <hr style="margin-top: 0px;margin-bottom: 2px">
                        <div class="row">
                            <div class="col-sm-4"><strong>Name</strong></div>
                            <div class="col-sm-8">Unspecified</div>
                        </div>

                    {% endif %}
                </div>
                <div>
                    {% if model_objective %}
                        <h4><strong>Model Objective:</strong></h4>
                        <hr style="margin-top: 0px;margin-bottom: 2px">
                        <div class="row">
                            <div class="col-sm-4"><strong>SWAT model objectives:</strong></div>
                            {% if model_objective.other_objectives %}
                                <div class="col-sm-8">{{ model_objective.get_swat_model_objectives }}, {{ model_objective.other_objectives }}</div>
                            {% else %}
                                <div class="col-sm-8">{{ model_objective.get_swat_model_objectives }}</div>
                            {% endif %}
                        </div>
                    <hr style="border:0">
                    {% endif %}
                </div>
                <div>
                    {% if simulation_type %}
                        <h4><strong>Simulation Type:</strong></h4>
                        <hr style="margin-top: 0px;margin-bottom: 2px">
                        <div class="row">
                            <div class="col-sm-4"><strong>SWAT simulation type:</strong></div>
                            <div class="col-sm-8">{{ simulation_type.simulation_type_name }}</div>
                        </div>
                    <hr style="border:0">
                    {% endif %}
                </div>
                <div>
                    {% if model_method %}
                        <h4><strong>Model Method:</strong></h4>
                        <hr style="margin-top: 0px;margin-bottom: 2px">
                        <div class="row">
                            {% if model_method.runoffCalculationMethod %}
                                <div class="col-sm-4"><strong>Runoff calculation method:</strong></div>
                                <div class="col-sm-8">{{ model_method.runoffCalculationMethod }}</div>
                            {% endif %}
                            {% if model_method.flowRoutingMethod %}
                                <div class="col-sm-4"><strong>Flow routing method:</strong></div>
                                <div class="col-sm-8">{{ model_method.flowRoutingMethod }}</div>
                            {% endif %}
                            {% if model_method.petEstimationMethod %}
                                <div class="col-sm-4"><strong>PET estimation method:</strong></div>
                                <div class="col-sm-8">{{ model_method.petEstimationMethod }}</div>
                            {% endif %}
                        </div>
                    <hr style="border:0">
                    {% endif %}
                </div>
                <div>
                    {% if model_parameter %}
                        <h4><strong>Model Parameter:</strong></h4>
                        <hr style="margin-top: 0px;margin-bottom: 2px">
                        <div class="row">
                            <div class="col-sm-4"><strong>SWAT model used parameters:</strong></div>

                            {% if model_parameter.other_parameters %}
                                <div class="col-sm-8">{{ model_parameter.get_swat_model_parameters }}, {{ model_parameter.other_parameters }} </div>
                            {% else %}
                                <div class="col-sm-8">{{ model_parameter.get_swat_model_parameters }}</div>{#
                            {% endif %}
                        </div>
                    <hr style="border:0">
                    {% endif %}
                </div>
                <div>
                    {% if model_input %}
                        <h4><strong>Model Input:</strong></h4>
                        <hr style="margin-top: 0px;margin-bottom: 2px">
                        <div class="row">
                            {% if model_input.warmupPeriodValue %}
                                <div class="col-sm-4"><strong>Warm-up period in years:</strong></div>
                                <div class="col-sm-8">{{ model_input.warmupPeriodValue }}</div>
                            {% endif %}
                            {% if model_input.rainfallTimeStepType %}
                                <div class="col-sm-4"><strong>Rainfall time step type:</strong></div>
                                <div class="col-sm-8">{{ model_input.rainfallTimeStepType }}</div>
                            {% endif %}
                            {% if model_input.rainfallTimeStepValue %}
                                <div class="col-sm-4"><strong>Rainfall time step value:</strong></div>
                                <div class="col-sm-8">{{ model_input.rainfallTimeStepValue }}</div>
                            {% endif %}
                            {% if model_input.routingTimeStepType %}
                                <div class="col-sm-4"><strong>Routing time step type:</strong></div>
                                <div class="col-sm-8">{{ model_input.routingTimeStepType }}</div>
                            {% endif %}
                            {% if model_input.routingTimeStepValue %}
                                <div class="col-sm-4"><strong>Routing time step value:</strong></div>
                                <div class="col-sm-8">{{ model_input.routingTimeStepValue }}</div>
                            {% endif %}
                            {% if model_input.simulationTimeStepType %}
                                <div class="col-sm-4"><strong>Simulation time step type:</strong></div>
                                <div class="col-sm-8">{{ model_input.simulationTimeStepType }}</div>
                            {% endif %}
                            {% if model_input.simulationTimeStepValue %}
                                <div class="col-sm-4"><strong>Simulation time step value:</strong></div>
                                <div class="col-sm-8">{{ model_input.simulationTimeStepValue }}</div>
                            {% endif %}
                            {% if model_input.watershedArea %}
                                <div class="col-sm-4"><strong>Watershed area in square kilometers:</strong></div>
                                <div class="col-sm-8">{{ model_input.watershedArea }}</div>
                            {% endif %}
                            {% if model_input.numberOfSubbasins %}
                                <div class="col-sm-4"><strong>Number of subbasins:</strong></div>
                                <div class="col-sm-8">{{ model_input.numberOfSubbasins }}</div>
                            {% endif %}
                            {% if model_input.numberOfHRUs %}
                                <div class="col-sm-4"><strong>Number of HRUs:</strong></div>
                                <div class="col-sm-8">{{ model_input.numberOfHRUs }}</div>
                            {% endif %}
                            {% if model_input.demResolution %}
                                <div class="col-sm-4"><strong>DEM resolution in meters:</strong></div>
                                <div class="col-sm-8">{{ model_input.demResolution }}</div>
                            {% endif %}
                            {% if model_input.demSourceName %}
                                <div class="col-sm-4"><strong>DEM source name:</strong></div>
                                <div class="col-sm-8">{{ model_input.demSourceName }}</div>
                            {% endif %}
                            {% if model_input.demSourceURL %}
                                <div class="col-sm-4"><strong>DEM source URL:</strong></div>
                                <div class="col-sm-8"><a id="permalink" href={{ model_input.demSourceURL }}>{{ model_input.demSourceURL }}</a></div>
                            {% endif %}
                            {% if model_input.landUseDataSourceName %}
                                <div class="col-sm-4"><strong>LandUse data source name:</strong></div>
                                <div class="col-sm-8">{{ model_input.landUseDataSourceName }}</div>
                            {% endif %}
                            {% if model_input.landUseDataSourceURL %}
                                <div class="col-sm-4"><strong>LandUse data source URL:</strong></div>
                                <div class="col-sm-8"><a id="permalink" href={{ model_input.landUseDataSourceURL }}>{{ model_input.landUseDataSourceURL }}</a></div>
                            {% endif %}
                            {% if model_input.soilDataSourceName %}
                                <div class="col-sm-4"><strong>Soil data source name:</strong></div>
                                <div class="col-sm-8">{{ model_input.soilDataSourceName }}</div>
                            {% endif %}
                            {% if model_input.soilDataSourceURL %}
                                <div class="col-sm-4"><strong>Soil data source URL:</strong></div>
                                <div class="col-sm-8"> <a id="permalink" href={{ model_input.soilDataSourceURL }}>{{ model_input.soilDataSourceURL }}</a></div>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    {%  endif %}
{%  endblock %}

{% load staticfiles  %}

{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static "css/bootstrap-multiselect.css" %}" />
    <link rel="stylesheet" type="text/css" href="{% static "css/model_instance.css" %}" />
{% endblock %}

{% block extra_js %}
    {{ block.super }}

    {# resource specific js can go here #}
    <script src="{% static "js/bootstrap-multiselect.js"%}"></script>
    <script src="{% static "js/model_instance.js"%}"></script>
{%  endblock %}
