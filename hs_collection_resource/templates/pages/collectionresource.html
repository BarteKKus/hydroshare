{% extends "pages/genericresource.html" %}
{% load geoanalytics_tags pages_tags mezzanine_tags crispy_forms_tags %}

{#{% block tools %}#}
{#{% endblock %}#}

{% block content %}
{% endblock %}

{#{% block extra_content %}#}
{#{% endblock %}#}

{% block extended_metadata %}
    {% if extended_metadata_exists %}
        <div class="row">
            <div class="col-md-12">
                <div>
                    {% if collection_items %}
                        <h4><strong>Collection Items:</strong></h4>
                        <hr style="margin-top: 0px;margin-bottom: 2px">
                        <div class="row">
                        {% autoescape off %}
                            <div class="col-sm-8">{{ collection_items }}</div>
                        {% endautoescape %}

                        </div>
                    {% endif %}
                      <br/>
                      <div style="font-size: smaller; color: red">
                        {{ collection_message }}
                      </div>
                </div>
            </div>
        </div>
    {%  endif %}
{%  endblock %}

{% block extra_js %}
    {{ block.super }}
    <div id="checked_res_div" hidden="true">{{ checked_res }}</div>
    {# put resource specific js below #}
    <script type="text/javascript">
        $(document).ready(function(){

             $('#add').click(function(e) {
                var selectedOpts = $('#select1 option:selected');
                if (selectedOpts.length == 0) {
                    e.preventDefault();
                }

                $('#select2').append($(selectedOpts).clone());
                $(selectedOpts).remove();
                e.preventDefault();
            });

            $('#remove').click(function(e) {
                var selectedOpts = $('#select2 option:selected');
                if (selectedOpts.length == 0) {
                    e.preventDefault();
                }

                $('#select1').append($(selectedOpts).clone());
                $(selectedOpts).remove();
                e.preventDefault();
            });

            $('#save').click(function() {
                $('#select2 option').each(function () {
                $(this).attr('selected', true);
                });

                metadata_update_ajax_submit("collector");

                $('#select2 option').each(function () {
                $(this).attr('selected', false);
                });
                return false;
            });
        })
    </script>
{% endblock %}