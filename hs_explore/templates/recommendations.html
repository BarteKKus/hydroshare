{% extends "base.html" %}

{% load pages_tags mezzanine_tags keyword_tags comment_tags hydroshare_tags %}
{% block title %}Explore{% endblock %}
{% block main %}
    <h2>Recommended resources</h2>
    <ul id='rec-res'>
        {% include "recommended_resources.html" %}
    </ul>
    <h2>Recommended users</h2>
    <ul id='rec-user'>
        {% include "recommended_users.html"  %}
    </ul>
{% endblock %}
{% block extra_js %}
    <script>
        var update_recommended = function(part, key, value) {
            console.log(part + ":" + key + ":" + value);
            startTime = new Date();
            if (part == 'resources') {
                $('#rec-res').empty();
            } else {
                $('#rec-user').empty();    
            }
            $.ajax({
                url: '/update_explore/',
                type: 'GET',
                data: {
                    recommended_part: part,
                    genre_key: key,
                    genre_value: value
                },
                success: function(data) {
                    if (part == 'resources') {
                        $('#rec-res').html(data);
                    } else {
                        $('#rec-user').html(data);
                    }
                    endTime = new Date();
                    var timeDiff = Math.round(endTime - startTime)/1000;
                    console.log(timeDiff + " seconds");
                },
                failure: function(data) { 
                    console.log('Got an error dude');
                }
            });
        }
        /*
        $(document).ready(function () {            
            $(".dismiss-button").click(function (e) {
                e.preventDefault();
                var arr = $(this).val().split(",");
                var key = arr[0];
                var value = arr[1];
                console.log(key + ":" + value);
                startTime = new Date();
                $('#rec-res').empty();
                $.ajax({
                    url: '/update_explore/',
                    type: 'GET',
                    data: {
                        genre_key: key,
                        genre_value: value
                    },
                    success: function(data) {
                        $('#rec-res').html(data);
                         endTime = new Date();
                         var timeDiff = Math.round(endTime - startTime)/1000;
                         console.log(timeDiff + " seconds");
                    },
                    failure: function(data) { 
                        console.log('Got an error dude');
                    }
                }); 

            });
        });*/
    </script>
{% endblock %}
